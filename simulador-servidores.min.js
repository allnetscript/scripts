(function(global) {
  function calcularServidor() {
    var valorStr = document.getElementById('valor-servidor').value;
    valorStr = valorStr.replace(/\./g, "").replace(',', '.');
    var principal = parseFloat(valorStr) || 0;
    var i = 0.0180; // Taxa de 1,80% ao mês
    var n = 96;     // 96 parcelas
    var parcela = principal * ((i * Math.pow(1 + i, n)) / (Math.pow(1 + i, n) - 1));
    
    document.getElementById('servidor-parcela').innerHTML =
      'Parcela: <strong>' + parcela.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }) + '</strong>';
    document.getElementById('servidor-parcelas').innerHTML =
      'Parcelas: <strong>' + n + ' vezes</strong>';
    document.getElementById('servidor-taxa').innerHTML =
      'Taxa de juros (ao mês): <strong>1,80%</strong>';
    document.getElementById('servidor-aviso').innerHTML =
      '<small>Os valores podem variar de acordo com a margem, a taxa de juros praticada pelo banco e o prazo. As taxas de juros podem chegar até 2,65% ao mês.</small>';
  }
  global.calcularServidor = calcularServidor;
})(window);
